<!doctype html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
        <!-- Google Fonts  -->
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700;900&display=swap" rel="stylesheet">
        <!-- Facility CSS -->
        <link href="/styles/jquery.datetimepicker.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="/styles/facilitypage.css">

        <!-- <link rel="stylesheet" type="text/css" href="/styles/facilitypage.css"> -->
        
        <title>APPoint</title>
    </head>
    <body>

        <nav id="navbar" class="navbar navbar-expand fixed-top">
            <div class="container">
                <a class="navbar-brand" href="/"><b class="navbar-text"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-journal-check" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path d="M3 0h10a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-1h1v1a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v1H1V2a2 2 0 0 1 2-2z"/>
                    <path d="M1 5v-.5a.5.5 0 0 1 1 0V5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0V8h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1zm0 3v-.5a.5.5 0 0 1 1 0v.5h.5a.5.5 0 0 1 0 1h-2a.5.5 0 0 1 0-1H1z"/>
                    <path fill-rule="evenodd" d="M10.854 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"/>
                  </svg> APPoint</b></a>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle navbar-text" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <svg width="1.5em" height="1.5em" viewBox="0 0 16 16" class="bi bi-person-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd" d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                                </svg>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                                <% if( isloggedIn == false ){ %>
                                    <a class="dropdown-item" href="/login"> <i class="fas fa-sign-in-alt" style="margin-right: 0.5em"></i> Login </a>
                                    <a class="dropdown-item" href="/signup"> <i class="fas fa-user-plus" style="margin-right: 0.2em"></i> Signup </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="#"> <i class="fas fa-user-tie" style="margin-right: 0.4em"></i> Corporate Sign-In</a>
                                <% }else{ %>
                                    <a class="dropdown-item" href="/profile"> <i class="fas fa-user" style="margin-right: 0.5em"></i> Profile </a>
                                    <div class="dropdown-divider"></div>
                                    <a href=""><form action="/logout" href="/login" method="POST" class="form dropdown-item" role="form"> <button class="logout-button" type="submit"> <i class="fas fa-sign-out-alt" style="margin-right: 0.4em"></i> Logout </button></form> </a>
                                <% } %>
                            </div>
                        </li>
                    </ul>
 
                </div>
            </div>
        </nav>

    
        <div class="container" style="margin-top: 100px">
            <% imgsrc = "/images/facilities/" + facility.image %>
            <img class="facilityphoto img-fluid" src= "<%= imgsrc %>" alt="">
        </div>


        <div class="container" style="margin-top: 10px">
            <h1 style="text-align: center"> <%= facility.name.toUpperCase() %></h1>
            <hr class="hr-under-placename">
        </div>

        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <h4>About The Facility</h4>
                    <p> <%= facility.about %> </p>
                </div>
                    </p>
                <div class="col-lg-6">
                    <h4>Contact</h4>
                    <p> Phone: <%= facility.number %> </p>
                    <p> Email: <%=facility.name%>@gmail.com </p>
                    <p> Adress: <%= facility.adress %> </p>

                    
                </div>
            </div>
        </div>


        <div class="jumbotron jumbotron-fluid">
            <div class="container">
                <h1 style="margin-left: 13px">Pick date from the calendar...</h1>        
                <script src="/scripts/jquery.js"></script>
                <script src="/scripts/jquery.datetimepicker.full.js"></script>
                
                <div class="container">
                <form href="/" action="" method="post" accept-charset="utf-8" class="form" role="form">
                <input type="text" id="datetime" name="datevalue" autocomplete="off">
                <p id="try">INPUT</p>

                <h1>Pick hour from the calendar...</h1>    
                <select name="hour" class = "form-control input-lg" placeholder="Choose hour">
                    <option value="08:00">08:00</option>
                    <option value="09:00">09:00</option>
                    <option value="10:00">10:00</option>
                    <option value="11:00">11:00</option>
                    <option value="12:00">12:00</option>
                    <option value="13:00">13:00</option>
                    <option value="14:00">14:00</option>
                    <option value="15:00">15:00</option>
                    <option value="16:00">16:00</option>
                    <option value="17:00">17:00</option>
                    <option value="18:00">18:00</option>
                    <option value="19:00">19:00</option>
                    <option value="20:00">20:00</option>
                    <option value="21:00">21:00</option>
                    <option value="22:00">22:00</option>
                    <option value="23:00">23:00</option>
                    <option value="24:00">24:00</option>
                </select> 
                <% if( isloggedIn == false ){ %>
                    <button type="submit" class="btn btn-primary btn-lg float-right" disabled> Submit</button>
                <% }else { %>
                    <button type="submit" class="btn btn-primary btn-lg float-right"> Submit</button>
                <% } %>
            </form>
            </div>
            </div>
        </div>

        <script>
            var p = document.getElementById("try");
            var selected;
            var datetimepicker = $("#datetime").datetimepicker({
                minView: 2,
                format: 'd.m.Y',
                timepicker: false,
                inline:false,
            });
        </script>

        <script>
            var hourOptions = document.querySelectorAll("option");
            var string;
            var choosen_date;
            var list = [];
            <% for(var i=0; i<facility.appointments.length-1; i++){ %>
                string = "<%= facility.appointments[i].date + " " + facility.appointments[i].hour %>";
                list.push(string);
            <% } %>
            //console.log(toDisable);

            var toDisable = list;

            $("#datetime").on("change",function(){

                for(var i=0; i<hourOptions.length; i++){
                    hourOptions[i].removeAttribute("disabled");
                    hourOptions[i].classList.remove("disabled-option");
                }

                choosen_date = $(this).val();
                p.textContent = choosen_date;

                for(var i=0; i<toDisable.length; i++){
                    if(toDisable[i].slice(0,10) === choosen_date){
                        for(var j=0; j<hourOptions.length; j++){
                            if(toDisable[i].slice(11,16) === hourOptions[j].textContent){
                                hourOptions[j].setAttribute("disabled", "true");
                                hourOptions[j].classList.add("disabled-option");
                            }
                        }
                    }
                }

            });
        </script>
        <script src="https://kit.fontawesome.com/540ab30225.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>




    </body>


</html>